<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Playlist - Javiera & Ángel</title>
  <link rel="stylesheet" href="style/style.css">
</head>
<body>

  <header>
      <h1>Javiera & Ángel</h1>
      <nav class="navbar">
          <a href="index.html">Inicio</a>
          <a href="ceremonia.html">Ceremonia</a>
          <a href="recepcion.html">Recepción</a>
          <a href="rsvp.html">Confirmar asistencia</a>
          <a href="playlist.html">Canciones</a>
      </nav>
  </header>
  <main>
    <section class="uniform-section fade-in">
      <h2>Nuestra Playlist</h2>
      <p>Queremos que la música de nuestro día también refleje tus gustos. ¡Escucha nuestra playlist y agrega tu canción favorita!</p>
    </section>

    <!-- Formulario para sugerir canción -->
    <section class="uniform-section fade-in">
      <h2>Sugiere una Canción</h2>
      <p>¿Tienes una canción especial que nos represente? ¡Agregala!</p>
    
      <form id="song-form" action="https://formspree.io/f/mwpbwvqz"  method="POST">
        <label for="nombre">Tu nombre:</label>
        <input type="text" id="nombre" name="nombre" placeholder="Ej: María González" required>
      
        <label for="cancion">Nombre de la canción:</label>
        <input type="text" id="cancion" name="cancion" placeholder="Ej: Perfect" required>
      
        <label for="artista">Artista:</label>
        <input type="text" id="artista" name="artista" placeholder="Ej: Ed Sheeran" required>
      
        <!-- Campo oculto para evitar errores en Formspree -->
        <input type="hidden" name="_subject" value="Nueva sugerencia de canción">
      
        <button type="submit">Enviar Sugerencia</button>
      </form>
    
      <!-- Mensaje de confirmación -->
  <div id="success-message" class="success-message">
    <h2>¡Gracias por tu sugerencia!</h2>
    <p>Pronto revisaremos tu canción 💖</p>
  </div>
</section>

    <section class="uniform-section fade-in">
      <div class="spotify-playlist">
        <iframe style="border-radius:12px" src="https://open.spotify.com/embed/playlist/17yr3fDnQ3IdvGcEzcSOYq?utm_source=generator" width="100%" height="352" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
      </div>
    </section>
  </main>

    <!-- Mensaje Final -->
  <section class="final-message">
      <h2>Esperamos verte allí</h2>
      <p>Consultas al boton del whatsapp</p>
      <p>Javiera & Ángel</p>
  </section>
  <script>
    const faders = document.querySelectorAll(".fade-in");
  
    const appearOnScroll = new IntersectionObserver((entries, observer) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add("visible");
          observer.unobserve(entry.target);
        }
      });
    }, {
      threshold: 0.2
    });
  
    faders.forEach(fader => {
      appearOnScroll.observe(fader);
    });
  
    // Mostrar mensaje de éxito al enviar
    const form = document.getElementById('song-form');
    const successMessage = document.getElementById('success-message');
  
    form.addEventListener('submit', function(event) {
      event.preventDefault(); // Detenemos el envío normal
    
      const formData = new FormData(form);
    
      fetch(form.action, {
        method: form.method,
        body: formData,
        headers: {
          'Accept': 'application/json'
        }
      }).then(response => {
        if (response.ok) {
          // Muestra el mensaje de éxito
          successMessage.style.display = 'block';
          form.reset();
        
          setTimeout(() => {
            successMessage.style.display = 'none';
          }, 5000);
        } else {
          alert("Hubo un error al enviar el formulario. Inténtalo de nuevo.");
        }
      }).catch(error => {
        console.error('Error:', error);
        alert("Hubo un error al enviar el formulario.");
      });
    });
  </script>

</body>
</html>
